<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ming.organization.dao.Organization">
    <!-- 添加组织-->
    <insert id="addOrganization" parameterType="com.ming.organization.entity.OrganizationEntity">
      insert into
            e_b_organization(
                organization_name,
                organization_superior,
                organization_gen_time
            )values (
                #{OrganizationName},
                #{OrganizationSuperior},
                #{OrganizationGenTime}
            )
    </insert>

    <!--批量添加组织-->
    <insert id="addBatchOrganization" parameterType="java.util.List">
        insert into
        e_b_organization(
        organization_name,
        organization_superior,
        organization_gen_time
        )values
        <foreach collection="list" item="item" index="index" separator=",">
            (
            #{item.OrganizationName},
            #{item.OrganizationSuperior},
            #{item.OrganizationGenTime}
            )
        </foreach>
    </insert>

    <!--删除组织-->
    <delete id="delectOrganization" parameterType="java.lang.Integer">
        delete from e_b_organization where organization_id=#{organizationId}
    </delete>

    <!--批量删除组织-->
    <delete id="delectBatchOrganization" parameterType="java.util.List">
        delete from e_b_organization where organization_id in
        <foreach collection="list" item="item" separator="," open="(" close=")">
            #{item}
        </foreach>
    </delete>

    <!--修改组织-->
    <update id="alertOrganization" parameterType="com.ming.organization.entity.OrganizationEntity">
        update e_b_organization set
        <if test="OrganizationName != null">
            organization_name=#{OrganizationName}
        </if>
        <if test="OrganizationSuperior != null">
            <if test="OrganizationName != null">
                ,
            </if>
            organization_superior=#{OrganizationSuperior}
        </if>
        where organization_id = #{OrganizationId}
    </update>

    <!--批量修改组织-->
    <update id="alertBatchOrganization" parameterType="java.util.List">
        <foreach collection="list" item="item" index="index" separator=";">
            update e_b_organization set
            <if test="item.OrganizationName != null">
                organization_name=#{item.OrganizationName}
            </if>
            <if test="item.OrganizationSuperior != null">
                <if test="item.OrganizationName != null">
                    ,
                </if>
                organization_superior=#{item.OrganizationSuperior}
            </if>
            where organization_id = #{item.OrganizationId}
        </foreach>
    </update>

    <!--查询组织-->
    <select id="getOrganization" parameterType="int" resultType="com.ming.organization.entity.OrganizationEntity">
      select * from e_b_organization where organization_id=#{organizationId}
    </select>

    <!--查询所有组织-->
    <!--<resultMap id="organizationList" type="com.ming.organization.entity.OrganizationEntity">

    </resultMap>-->
    <!--<select id="getOrganizationList" resultType="organizationList">

    </select>-->

    <!--查询组织名称-->
    <select id="getOrganizationName" parameterType="int" resultType="String">
      select organization_name from e_b_organization where organization_id=#{organizationId}
    </select>

    <!--查询组织创建时间-->
    <select id="getOrganizationGenTime" parameterType="int" resultType="String">
      select organization_gen_time from e_b_organization where organization_id=#{organizationId}
    </select>

    <!--查询上级组织id-->
    <select id="getOrganizationSuperiorId" parameterType="int" resultType="int">
      select organization_superior from e_b_organization where organization_id=#{organizationId}
    </select>


</mapper>